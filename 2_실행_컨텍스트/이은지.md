# 실행 컨텍스트

## 실행 컨텍스트란?

-실행할 코드에 제공할 환경 정보들을 모아놓은 객체  
  
**작동 방식**  
-전역 실행 컨텍스트 스택에 담김  
-전역 실행 컨텍스트의 문을 순차적으로 수행하다 outer 함수 호출 시 이에 대한 실행 컨텍스트를 만들고 스택에 넣음  
-outer 실행 컨텍스와 관련된 문장 수행  
-inner 함수 호출 시 inner 함수에 대한 실행 컨텍스트를 만들고 스택에 넣음  
-함수 호출이 끝나면 바깥부터 차례대로 실행 컨텍스트 종료  
  
## VariableEnvironment

-최초 실행 시 스냅샷이 담긴다는 점을 제외하면 렉시컬 환경과 동일  
  
## LexicalEnvironment

### environmentRecord와 호이스팅

-enviromentRecord: 현재 컨텍스트와 관련된 코드의 식별자 정보가 저장  
-호이스팅: 식별자를 최상단으로 끌어올려놓은 다음 실제 코드 실행  
**let과 const를 쓸 시 큰 영향이 가지 않음**
  
-함수 선언문: function의 정의만 존재하며 별도의 할당 명령 x  
-함수 표현식: 정의한 function을 별도의 변수에 할당  
  
## 스코프 체인

-스코프: 식별자에 대한 유효범위  
-스코프 체인: '식별자의 유효범위'를 안에서부터 바깥으로 검색하는 것  
  
-전역변수: LexicalEnvironment에 담긴 변수  
-지역변수: 그 밖의 함수에 의해 생성된 실행 컨텍스트의 변수  
  
코드의 안전성을 위해 전역변수 사용은 지양  
  
## this

-실행 컨텍스트 활성화 당시 this가 지정되지 않은 경우 this에 전역 객체 저장  
-그밖에는 함수 호출 방법에 따라 저장 대상이 다름  
  
## 정리

1. 실행 컨텍스트: 실행할 코드에 제공할 환경 정보들을 모아놓은 객체  
2. 실행 컨텍스트 객체는 활성화되는 시점에 VariableEnvironment, LexicalEnvironment, ThisBinding의 세 가지 정보를 수집  
3. VariableEnvironment와 LexicalEnvironment는 동일한 내용으로 구성되나, 전자는 함수 초기 상태를 유지하며 후자는 함수 실행 도중 변경 사항이 즉시 반영됨  
4. 호이스팅: 코드 해석을 수월하게 하기 위해 environmentRecord의 수집 과정을 추상화한 개념(끌어올린다)  
5. outerEnvironmentReference는 해당 함수가 선언된 위치의 lexicalEnvironment를 참조  
6. 실행 컨텍스트를 활성화하는 당시에 지정된 this가 저장->함수를 호출하는 방법에 따라 그 값이 달라지는데, 지정되지 않은 경우 전역 객체가 저장  