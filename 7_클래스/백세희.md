## 07 클래스

### 7-1 클래스와 인스턴스의 개념 이해

**클래스**는 상위 클래스(superclass)와 하위클래스(subclass)가 있음

클래스는 하위로 갈수록 상위 클래스의 속성을 상속하면서 더 구체적인 요건이 추가 또는 변경됨

**인스턴스** 어떤 클래스의 속성을 지니는 실존하는 개체를 말함

프로그래밍 언어상에서 접근 방식

- 직접 여러 가지 클래스를 정의해야 함
- 클래스를 바탕으로 인스턴스를 만들 때 비로소 어떤 객체가 클래스의 속성을 지니게 됨
- 한 인스턴스는 하나의 클래스만을 바탕으로 만들어짐
- 클래스들은 인스턴스 입장에서는 '직계존속'임

### 7-2 자바스크립트의 클래스

생성자 함수 Array를 new 연산자와 함께 호출하면 인스턴스가 생성됨

Array는 일종의 클래스라고 하면, Array의 prototype 객체 내부 요소들이 인스턴스에 '상속'됨 (엄밀히 말하면 상속이 아닌 프로토타입 체이닝에 의한 참조)

한편 Array 내부 프로퍼티들 중 prototype 프로퍼티를 제외한 나머지는 인스턴스에 상속되지 않음

인스턴스에 상속되는지(인스턴스가 참조하는지) 여부에 따라 스태틱 멤버(static member)와 인스턴스 멤버(instance member)로 나뉨

자바스크립트에서는 인스턴스에서도 직접 메서드를 정의할 수 있기 때문에 프로토타입 메서드라고 부름

- 인스턴스에서 직접 호출할 수 있는 메서드가 바로 프로토타입 메서드임
- 인스턴스에서 직접 접근할 수 없는 메서드를 스태틱 메서드라고 함
- 스태틱 메서드는 생성자 함수를 this로 해야만 호출할 수 있음

구체적인 인스턴스가 사용할 메서드를 정의한 '틀'의 역할을 담당하는 목적을 가질 때의 클래스는 추상적인 개념이지만, 클래스 자체를 this로 해서 직접 접근해야만 하는 스태틱 메서드를 호출할 때의 클래스는 그 자체가 하나의 개체로 취급

### 7-3 클래스 상속

- 7-3-1 기본 구현
  자바스크립트에서 클래스 상속을 구현했다는 것은 결국 프로토타입 체이닝을 잘 연결한 것

  다만, 세부적으로 완벽하게 superclass와 subclass의 구현이 이뤄진 것은 아님

  인스턴스와의 관계에서는 구체적인 데이터를 지니지 않고 오직 인스턴스가 사용할 메서드만을 지니는 추상적인 '틀'로서만 작용하게끔 작성하지 않는다면 언제가 어딘가에서 예기치 않은 오류가 발생할 가능성을 안고 가야 함

  하위 클래스로 삼을 생성자 함수의 prototype에 상위 클래스의 인스턴스를 부여하는 것만으로도 기본적인 메서드 상속은 가능하지만 다양한 문제가 발생할 여지가 있어 구조적으로 안전성이 떨어짐

- 7-3-2 클래스가 구체적인 데이터를 지니지 않게 하는 방법
  클래스(prototype)가 구체적인 데이터를 지니지 않게 하는 방법

  클래스 상속 및 추상화 방법

  1. 인스턴스 생성 후 프로퍼티 제거
  2. 빈 함수를 활용

     SubClass의 prototype에 직접 SuperClass의 인스턴스를 할당하는 대신 아무런 프로퍼티를 생성하지 않는 빈 생성자 함수(Bridge)를 하나 더 만들어서 그 prototype에는 Bridge의 인스턴스를 할당하게 하는 것, 빈 함수에 다리 역할을 부여하는 것

  3. Object.create 활용

  SubClass의 prototype의 __proto__가 SuperClass의 prototype을 바라보되, SupperClass 인스턴스가 되지 않는 방법

- 7-3-3 constructor 복구하기
  7-3-2의 방법 모두 기본적인 상속에는 성공했지만 SubClass 인스턴스에는 constructor가 없고, SubClass.prototype에도 없는 상태임( 프로토타입 체인상에 가장 먼저 등장하는 SuperClass.prototype의 constructor에서 가리키는 대상, 즉 SuperClass가 출력될 뿐)

  -> SubClass.prototype.constructor가 원래의 SubClass를 바라보도록 해주면 됨

- 7-3-4 상위 클래스에의 접근 수단 제공
  때론 하위 클래스의 메서드에서 상위 클래스의 메서드 실행 결과를 바탕으로 추가적인 작업을 수행하고 싶을 때가 있음

  하위 클래스에서 상위 클래스의 프로토타입 메서드에 접근하기 위한 별도의 수단이 필요함

  상위 클래스에 접근할 수 있는 수단인 super 메서드 추가 코드

  ```js
  SubClass.prototype.super = function (propName) { //추가된 부분 시작
    var self = this;
    if (!propName)
      return function () {
        SuperClass.apply(self.arguments);
      };
    var prop = SuperClass.prototype[propName];
    if (typeof prop !== "function") return prop;
    return function () {
      return prop.apply(self, arguments);
    };
  }; // 추가된 부분 끝
  ```

### 7-4 ES6의 클래스 및 클래스 상속

ES6에서는 본격적으로 클래스 문법이 도입됨

ES6에서는 상당히 간단하게 처리됨
